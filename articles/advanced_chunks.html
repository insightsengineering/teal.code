<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="teal.code">
<title>Advanced chunks â€¢ teal.code</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Advanced chunks">
<meta property="og:description" content="teal.code">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">teal.code</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9003</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 30px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/teal-code.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/advanced_chunks.html">Advanced chunks</a>
    <a class="dropdown-item" href="../articles/basic_chunks.html">Basic chunks</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../index.html">latest</a></li>
   <li><a href="..//index.html"></a></li>
</ul></li>
<!-- end_releases -->
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/teal.code">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Advanced chunks</h1>
                        <h4 data-toc-skip class="author">NEST
coreDev</h4>
            
            <h4 data-toc-skip class="date">2022-05-09</h4>
      
      
      <div class="d-none name"><code>advanced_chunks.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="decoupling-chunks-containers">Decoupling chunks containers<a class="anchor" aria-label="anchor" href="#decoupling-chunks-containers"></a>
</h3>
<p>In a shiny app there is often a need to have multiple chunks
containers that may be used independently by certain parts of the
application and may be used together by other parts of the application.
The ability to have multiple chunks containers combined into one allows
for greater flexibility of the code, which allows the developer to apply
the <code>DRY</code> principle (stands for <code>Do not repeat</code>
which means code that are used in multiple places should only be written
and defined once) and optimize performance. Much of the functionality to
use a single chunks container object independently has already been
covered in the <a href="./basic_chunks.Rmd">Basic chunks</a> vignette,
which you should read first before going any further.</p>
</div>
<div class="section level3">
<h3 id="creating-a-chunks-container-and-assigning-it-to-a-variable">Creating a chunks container and assigning it to a variable<a class="anchor" aria-label="anchor" href="#creating-a-chunks-container-and-assigning-it-to-a-variable"></a>
</h3>
<p>In order to have multiple chunks containers, each must be accessible
and distinguishable via a variable.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_0</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_1</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_2</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>

<span class="co"># if data used is static, then it should be computed once</span>
<span class="co"># isolating it into its own chunks container accomplishes this goal</span>
<span class="va">ch_0</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">ch_1</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># some really long running process</span>
  <span class="va">foo_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df_arg</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df_arg</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>
<span class="va">ch_2</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># some really long running process</span>
  <span class="va">foo_print</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df_arg</span><span class="op">)</span> <span class="va">df_arg</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>

<span class="co"># chunks containers should be evaluated before being merged</span>
<span class="co"># the reason for this will be explain later</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##           a         b</span>
<span class="co">## 1 -1.650908 -4.162232</span>
<span class="co">## 2  1.029175 -4.440147</span>
<span class="co">## 3  1.765107  3.782671</span>
<span class="co">## 4  8.724059  5.284428</span>
<span class="co">## 5  3.019842 -8.082078</span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_1</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## function(df_arg) plot(df_arg)</span>
<span class="co">## &lt;environment: 0x560cc3151f70&gt;</span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## function(df_arg) df_arg</span>
<span class="co">## &lt;environment: 0x560cc3268690&gt;</span></code></pre>
<p>The <code><a href="../reference/chunks_push_chunks.html">teal.code::chunks_push_chunks</a></code> function is called to
combine chunks containers together. Note that the base chunks container
to start combining from in the following examples are all empty.
However, that does not have to be the case. Starting with a clean slate
is easier to comprehend.</p>
<p>Perhaps a part of your shiny application needs to output a plot</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_plot</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_0</span>, chunks <span class="op">=</span> <span class="va">ch_plot</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_1</span>, chunks <span class="op">=</span> <span class="va">ch_plot</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">foo_plot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_plot</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_plot</span><span class="op">)</span></code></pre></div>
<p><img src="advanced_chunks_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<pre><code><span class="co">## NULL</span></code></pre>
<p>Perhaps a part of your shiny application needs to output a table</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_table</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_0</span>, chunks <span class="op">=</span> <span class="va">ch_table</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_2</span>, chunks <span class="op">=</span> <span class="va">ch_table</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">foo_print</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_table</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_table</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##           a         b</span>
<span class="co">## 1 -1.650908 -4.162232</span>
<span class="co">## 2  1.029175 -4.440147</span>
<span class="co">## 3  1.765107  3.782671</span>
<span class="co">## 4  8.724059  5.284428</span>
<span class="co">## 5  3.019842 -8.082078</span></code></pre>
<p>Perhaps the main part of your shiny application needs to output a
plot, a table, and the code to generate both</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_ouput</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_0</span>, chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_1</span>, chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_2</span>, chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">foo_plot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">foo_print</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span></code></pre></div>
<p><img src="advanced_chunks_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span class="co">##           a         b</span>
<span class="co">## 1 -1.650908 -4.162232</span>
<span class="co">## 2  1.029175 -4.440147</span>
<span class="co">## 3  1.765107  3.782671</span>
<span class="co">## 4  8.724059  5.284428</span>
<span class="co">## 5  3.019842 -8.082078</span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_get_rcode.html">chunks_get_rcode</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_ouput</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">code</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<pre><code><span class="co">## df &lt;- data.frame(a = runif(5, -10, 10), b = runif(5, -10, 10))</span>
<span class="co">## Sys.sleep(1)</span>
<span class="co">## foo_plot &lt;- function(df_arg) plot(df_arg)</span>
<span class="co">## Sys.sleep(1)</span>
<span class="co">## foo_print &lt;- function(df_arg) df_arg</span>
<span class="co">## foo_plot(df)</span>
<span class="co">## foo_print(df)</span></code></pre>
<p>When chunks containers are merged together, their code expressions
are combined in the order that the containers were merged and their
environments are combined into a single environment.</p>
<p>Even in the event that the expressions that are combined will lead to
errors being thrown when evaluated, there is no way for the chunks
object to know that before evaluation. Hence code expressions will not
interrupt the merging of chunks containers together.</p>
<p>However, the potential conflict of when two chunks containers have
the same variables which holds different values in their respective
environments will throw an error when merging chunks containers.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_0</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_1</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>

<span class="va">ch_0</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">a_var</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="va">ch_1</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">a_var</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>

<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 0</span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_1</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 0</span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># OK - operation is successful as the variable a_var holds the same value in both chunks</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_1</span>, chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span>

<span class="va">ch_2</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_2</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">a_var</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 1</span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ERROR - operation is rejected as the variable a_var holds different values</span>
<span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span>
  <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_2</span>, chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span>,
  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="va">e</span>
<span class="op">)</span></code></pre></div>
<pre><code><span class="co">## &lt;simpleError in chunks$push_chunks(x = x, overwrite = overwrite): chunks_push_chunks does not allow overwriting already calculated values.</span>
<span class="co">##  Following variables would have been overwritten:</span>
<span class="co">##     - a_var&gt;</span></code></pre>
<div class="section level4">
<h4 id="why-should-you-evaluate-before-merging">Why should you evaluate before merging?<a class="anchor" aria-label="anchor" href="#why-should-you-evaluate-before-merging"></a>
</h4>
<p>With the exception of code that is meant to return something at the
end of a function, code usually modifies the environment and / or the
variables inside the environment.</p>
<p>When chunks containers have code that have not been evaluated, these
code will not block any merging operations as explained above. But if
they are evaluated, then their environment will be updated and will
reflect the intended state of the chunks container as described by the
code expressions.</p>
<p>And as described above, it is the environment that will block the
operation to merge chunks containers together when there are conflicts.
So evaluating before merging will prevent some bugs in your app.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_0</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_0</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">a_var</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 0</span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_2</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_2</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">a_var</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>

<span class="co"># note that ch_2 is not evaluated</span>

<span class="co"># OK - operation is successful</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span><span class="va">ch_2</span>, chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="cloning-a-chunks-container">Cloning a chunks container<a class="anchor" aria-label="anchor" href="#cloning-a-chunks-container"></a>
</h3>
<p>A chunks container is an R6 reference class, so by default contains a
<code>clone</code> method. A deep copy is needed if some part of your
app needs to start from the state of an already existing chunks
container and modify or add on to it, but some other part of your app
still needs the original chunks container unaltered.</p>
<p>The example code below is another way to print the plot above, which
starts combining chunks from a non-empty chunks container derived from
cloning another chunks container</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_0</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_0</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
  <span class="va">foo_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df_arg</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df_arg</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## function(df_arg) plot(df_arg)</span>
<span class="co">## &lt;environment: 0x560cc436ee08&gt;</span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_plot_clone</span> <span class="op">&lt;-</span> <span class="va">ch_0</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">foo_plot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_plot_clone</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_plot_clone</span><span class="op">)</span></code></pre></div>
<p><img src="advanced_chunks_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<pre><code><span class="co">## NULL</span></code></pre>
</div>
<div class="section level3">
<h3 id="extracting-values-of-variables-in-a-chunks-container">Extracting values of variables in a chunks container<a class="anchor" aria-label="anchor" href="#extracting-values-of-variables-in-a-chunks-container"></a>
</h3>
<p>In order to extract values of variables inside a chunks container,
the code that generates that variable must have been evaluated</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ch_0</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">ch_0</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##            a          b</span>
<span class="co">## 1 -0.6472731 -0.8593109</span>
<span class="co">## 2 -6.5922725 -5.1502638</span>
<span class="co">## 3  3.1647241  7.5711741</span>
<span class="co">## 4  2.8205783  0.4350304</span>
<span class="co">## 5 -2.8034191 -5.5022899</span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">env</span><span class="op">$</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"df"</span>, chunks <span class="op">=</span> <span class="va">ch_0</span><span class="op">)</span>

<span class="co"># Once extracted, the value can be passed into other chunks containers if needed</span>

<span class="va">ch_print_df</span> <span class="op">&lt;-</span> <span class="fu">teal.code</span><span class="fu">::</span><span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_reset.html">chunks_reset</a></span><span class="op">(</span>envir <span class="op">=</span> <span class="va">env</span>, chunks <span class="op">=</span> <span class="va">ch_print_df</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, chunks <span class="op">=</span> <span class="va">ch_print_df</span><span class="op">)</span>
<span class="fu">teal.code</span><span class="fu">::</span><span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch_print_df</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##            a          b</span>
<span class="co">## 1 -0.6472731 -0.8593109</span>
<span class="co">## 2 -6.5922725 -5.1502638</span>
<span class="co">## 3  3.1647241  7.5711741</span>
<span class="co">## 4  2.8205783  0.4350304</span>
<span class="co">## 5 -2.8034191 -5.5022899</span></code></pre>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The following is a shiny app that uses the chunks container object in
ways that mirror how a sophistical <code>teal</code> app would use it.
This app constructs several chunks containers, allowing each to be used
and combined by different parts of the app, which enables the app to
apply the <code>DRY</code> principle and optimize performance.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.code</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span>
      <span class="co"># Input of Response can be chosen from Event Table</span>
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span>
        inputId <span class="op">=</span> <span class="st">"filter_paramcd"</span>,
        label <span class="op">=</span> <span class="st">"Filter Paramcd"</span>,
        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OS"</span>, <span class="st">"EFS"</span>, <span class="st">"PFS"</span><span class="op">)</span>,
        selected <span class="op">=</span> <span class="st">"OS"</span>,
        multiple <span class="op">=</span> <span class="cn">TRUE</span>
      <span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span>
        inputId <span class="op">=</span> <span class="st">"filter_sex"</span>,
        label <span class="op">=</span> <span class="st">"Filter sex"</span>,
        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"U"</span><span class="op">)</span>,
        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"U"</span><span class="op">)</span>,
        multiple <span class="op">=</span> <span class="cn">TRUE</span>
      <span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span>
        inputId <span class="op">=</span> <span class="st">"anl_columns"</span>,
        label <span class="op">=</span> <span class="st">"ANL columns"</span>,
        choices <span class="op">=</span> <span class="cn">NULL</span>,
        multiple <span class="op">=</span> <span class="cn">TRUE</span>
      <span class="op">)</span>
    <span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"code"</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span>,
      <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html" class="external-link">DTOutput</a></span><span class="op">(</span><span class="st">"anl_table"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># chunks container to hold the datasets used in this app.</span>
  <span class="co"># The purpose of storing the code to generate the datasets is reproducibility.</span>
  <span class="va">data_def_chunks</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
  <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
    expression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="op">{</span>
      <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
      <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">teal.code</span><span class="op">)</span>
      <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
      <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>,
    chunks <span class="op">=</span> <span class="va">data_def_chunks</span>
  <span class="op">)</span>
  <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
    expression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span>
      <span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        SUBJID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,
        STUDYID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,
        AGE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">:</span><span class="fl">88</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span>,
        SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"U"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span>
      <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
        <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span>,
    chunks <span class="op">=</span> <span class="va">data_def_chunks</span>
  <span class="op">)</span>
  <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
    expression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span>
      <span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        SUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">3</span><span class="op">)</span>,
        STUDYID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,
        PARAMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"OS"</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"EFS"</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"PFS"</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span>,
        AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span> <span class="op">/</span> <span class="fl">80</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span> <span class="op">/</span> <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span>,
        AVALU <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"DAYS"</span>, <span class="fl">300</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="op">)</span>
      <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
        <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span>,
    chunks <span class="op">=</span> <span class="va">data_def_chunks</span>
  <span class="op">)</span>
  <span class="co"># evaluating the code so that the datasets become available</span>
  <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">data_def_chunks</span><span class="op">)</span>

  <span class="co"># reactive that needs to extract a value from another chunks container</span>
  <span class="va">adsl_filtered_reactive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span>
    <span class="va">env</span><span class="op">$</span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"adsl"</span>, chunks <span class="op">=</span> <span class="va">data_def_chunks</span><span class="op">)</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_reset.html">chunks_reset</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, env <span class="op">=</span> <span class="va">env</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      chunks <span class="op">=</span> <span class="va">ch</span>,
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">expr</a></span><span class="op">(</span><span class="va">adsl_filtered</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SEX</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="op">!</span><span class="op">!</span><span class="va">input</span><span class="op">$</span><span class="va">filter_sex</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># reactive that needs to extract a value from another chunks container</span>
  <span class="va">events_filtered_reactive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span>
    <span class="va">env</span><span class="op">$</span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"events"</span>, chunks <span class="op">=</span> <span class="va">data_def_chunks</span><span class="op">)</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_reset.html">chunks_reset</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, env <span class="op">=</span> <span class="va">env</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      chunks <span class="op">=</span> <span class="va">ch</span>,
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">expr</a></span><span class="op">(</span><span class="va">events_filtered</span> <span class="op">&lt;-</span> <span class="va">events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="op">!</span><span class="op">!</span><span class="va">input</span><span class="op">$</span><span class="va">filter_paramcd</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># part of the app that merges two other chunks containers</span>
  <span class="va">merge_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>

    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">adsl_filtered_reactive</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">events_filtered_reactive</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      chunks <span class="op">=</span> <span class="va">ch</span>,
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">expr</a></span><span class="op">(</span><span class="va">anl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">adsl_filtered</span>, <span class="va">events_filtered</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"SUBJID"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="fu">merge_data</span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span>
    <span class="va">anl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span><span class="st">"anl"</span>, <span class="fu">merge_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateSelectInput.html" class="external-link">updateSelectInput</a></span><span class="op">(</span>
      <span class="va">session</span>,
      <span class="st">"anl_columns"</span>,
      choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">anl</span><span class="op">)</span>,
      selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">anl</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># need to clone as chunks are R6 object - this would change ch in merge_data()</span>
  <span class="va">subset_anl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="fu">merge_data</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span><span class="va">anl_subset</span> <span class="op">&lt;-</span> <span class="va">anl</span><span class="op">[</span><span class="op">!</span><span class="op">!</span><span class="va">input</span><span class="op">$</span><span class="va">anl_columns</span><span class="op">]</span><span class="op">)</span>,
      chunks <span class="op">=</span> <span class="va">ch</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># a chunks container that needs to extract a value from another chunks container</span>
  <span class="va">table_call</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span>
    <span class="va">env</span><span class="op">$</span><span class="va">anl_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="fu">subset_anl</span><span class="op">(</span><span class="op">)</span>, var <span class="op">=</span> <span class="st">"anl_subset"</span><span class="op">)</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_reset.html">chunks_reset</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, env <span class="op">=</span> <span class="va">env</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">table</span> <span class="op">&lt;-</span> <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">anl_subset</span><span class="op">)</span>
        <span class="va">table</span>
      <span class="op">}</span><span class="op">)</span>,
      chunks <span class="op">=</span> <span class="va">ch</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># a chunks container that needs to extract a value from another chunks container</span>
  <span class="va">plot_call</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span>
    <span class="va">env</span><span class="op">$</span><span class="va">anl_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="fu">subset_anl</span><span class="op">(</span><span class="op">)</span>, var <span class="op">=</span> <span class="st">"anl_subset"</span><span class="op">)</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_reset.html">chunks_reset</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, env <span class="op">=</span> <span class="va">env</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">plot_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">anl_subset</span><span class="op">$</span><span class="va">AGE</span>, <span class="va">anl_subset</span><span class="op">$</span><span class="va">AVAL</span><span class="op">)</span>
        <span class="va">plot_output</span>
      <span class="op">}</span><span class="op">)</span>,
      chunks <span class="op">=</span> <span class="va">ch</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># Really long running process that should not be recomputed if can be avoided.</span>
  <span class="co">#</span>
  <span class="co"># The ability to put this process in its own chunks container, independent of the rest,</span>
  <span class="co"># allows the app to avoid re-computation and yet be able to capture its code to ensure reproducibility.</span>
  <span class="va">sleep_5_seconds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push.html">chunks_push</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,
      chunks <span class="op">=</span> <span class="va">ch</span>
    <span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_safe_eval.html">chunks_safe_eval</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># part of the app that needs to combine all chunks containers</span>
  <span class="va">outputs_call</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/chunks.html">chunks</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="va">data_def_chunks</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">sleep_5_seconds</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">subset_anl</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">plot_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/chunks_push_chunks.html">chunks_push_chunks</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="va">ch</span>, <span class="fu">table_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="va">ch</span>
  <span class="op">}</span><span class="op">)</span>

  <span class="co"># part of the app that only needs a single chunks container</span>
  <span class="va">output</span><span class="op">$</span><span class="va">anl_table</span> <span class="op">&lt;-</span> <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html" class="external-link">renderDT</a></span><span class="op">(</span><span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="fu">table_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="fu"><a href="../reference/chunks_get_var.html">chunks_get_var</a></span><span class="op">(</span><span class="st">"plot_output"</span>, <span class="fu">plot_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

  <span class="va">output</span><span class="op">$</span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/chunks_get_rcode.html">chunks_get_rcode</a></span><span class="op">(</span>chunks <span class="op">=</span> <span class="fu">outputs_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,
        collapse <span class="op">=</span> <span class="st">"\n"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The ability to have multiple chunks containers combined into one
allows for greater flexibility of the code, which allows the developer
to apply the <code>DRY</code> principle and optimize performance.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal.code is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
